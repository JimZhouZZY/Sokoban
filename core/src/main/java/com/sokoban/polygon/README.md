需要注意的是，继承于 `Actor` 的图形类中，素材的 `dispose` 等生命交由外部管理，图形类本身不负责管理素材生命周期

复选框等组件实现比较纠结，用 `Texure` 实现管理上不太统一，可能考虑尝试用 `Spine` 实现，不过这样就比较难处理 `Table` 和后续对齐（存疑）

已经换成 `Spine`

但是实测发现 `Table` 有 bug，无法很好地接管 `Spine` 对象. 只能手搓轮子了.

写了一个 `ImageFontStringObject` 对象，规避 `FitViewport` 的不兼容问题

对于计时器小组件 `TimerClock` 以及其动效，感觉涉及到很多自动机状态管理的问题，手写逻辑显得很繁琐且复用性不佳，能否写一个管理器？

写加速度管理器的时候，加了一个边界框功能。如果想要实现任意形状边界框（例如贝塞尔曲线），那就肯定要有数值计算边界框法线方向阻挡的模块

感觉复杂性太高，接下来实现矩形边界框应该就差不多了

如果有其它长尾需求，就把多边形边界框用多个矩形边界框实现吧，虽然效果不是最好

字体文件还是很难读取的。不过详细追问 AI 获得了一些信息

要将字符排列整齐，绘制字体时需要综合考虑字符的位置、间距和大小。以下是详细的理论计算步骤和相关参数说明：

---

## **1. 理解关键参数**

在 `.fnt` 文件中，每个字符的定义提供了绘制时所需的关键参数：

- **`xoffset` 和 `yoffset`**  
  描述字符纹理在基线上的起始位置调整。  
  - `xoffset` 是水平方向的偏移，用于微调字符的水平起始位置。
  - `yoffset` 是垂直方向的偏移，用于调整字符在行基线上的高度位置。

- **`xadvance`**  
  描述字符绘制完成后，光标应该前进的距离。通常，这个值包括字符本身的宽度和字符间的水平间距。

- **`lineHeight`**  
  一行文字的总高度，用于确保字符上下排列时不重叠。

- **`base`**  
  描述基线在一行文字中相对于顶端的垂直偏移。所有字符的 `yoffset` 是基于这个基线的。

---

## **2. 计算绘制字符的坐标**

在绘制每个字符时，核心目标是正确计算其左上角的屏幕坐标位置。以下是具体步骤：

### 水平方向计算：
1. **初始化光标位置**  
   从 `(cursor_x, cursor_y)` 开始，这是第一行第一个字符的基准位置。  
   - `cursor_x`: 光标的水平位置。
   - `cursor_y`: 光标的垂直位置（基线位置）。

2. **计算字符左上角的水平坐标**  
   使用公式：
   \[
   x_{\text{draw}} = \text{cursor}_x + x_{\text{offset}}
   \]

3. **更新光标位置**  
   在绘制当前字符后，将光标水平移动 `xadvance`：
   \[
   \text{cursor}_x = \text{cursor}_x + x_{\text{advance}}
   \]

### 垂直方向计算：
1. **计算字符左上角的垂直坐标**  
   字符的纹理位置由基线位置 `cursor_y` 和 `yoffset` 确定：
   \[
   y_{\text{draw}} = \text{cursor}_y - y_{\text{offset}}
   \]
   注意：`yoffset` 通常为正值，表示字符位于基线之下。

---

## **3. 绘制字符纹理**

绘制每个字符时，实际显示的矩形大小由纹理的 `width` 和 `height` 决定。  
- **纹理矩形**：位于纹理文件中的区域 `[x, y, width, height]`。  
- **绘制矩形**：使用计算出的 `(x_draw, y_draw)` 作为左上角坐标，`width` 和 `height` 为矩形尺寸。

---

## **4. 多行文字的处理**

1. **换行处理**  
   当一行字符超过预定宽度时，光标需要换行：
   - 将光标的水平位置重置为行起始位置：
     \[
     \text{cursor}_x = \text{line\_start}_x
     \]
   - 将光标垂直位置向下移动一行：
     \[
     \text{cursor}_y = \text{cursor}_y + \text{lineHeight}
     \]

2. **行基线对齐**  
   新一行的基线由 `base` 决定，可以确保不同行的字符在垂直方向对齐。

---

## **5. 示例：绘制字符串**

假设我们要绘制字符串 "Hello"，并使用以下参数：
- 起始光标：`(cursor_x, cursor_y) = (50, 300)`
- 字符参数：  
  - `lineHeight = 74`  
  - `base = 60`

字符示例（取部分）：
```plaintext
char id=72 (H): xoffset=3, yoffset=14, xadvance=50, width=34, height=48
char id=101 (e): xoffset=2, yoffset=18, xadvance=40, width=28, height=42
char id=108 (l): xoffset=1, yoffset=10, xadvance=30, width=10, height=50
```

### 计算步骤：
1. **绘制 H**:
   - `x_draw = cursor_x + xoffset = 50 + 3 = 53`
   - `y_draw = cursor_y - yoffset = 300 - 14 = 286`
   - 绘制矩形 `(53, 286, 34, 48)`
   - 更新光标：`cursor_x = 50 + 50 = 100`

2. **绘制 e**:
   - `x_draw = 100 + 2 = 102`
   - `y_draw = 300 - 18 = 282`
   - 绘制矩形 `(102, 282, 28, 42)`
   - 更新光标：`cursor_x = 100 + 40 = 140`

3. **绘制 l**:
   - `x_draw = 140 + 1 = 141`
   - `y_draw = 300 - 10 = 290`
   - 绘制矩形 `(141, 290, 10, 50)`
   - 更新光标：`cursor_x = 140 + 30 = 170`

### 最终效果：
字符按照光标位置排列整齐，基线对齐，同时根据 `xadvance` 保证字符间距。

---

## **6. 扩展：间距调整**
- 如果需要调整字符间距，可以在每次 `cursor_x` 更新时，添加或减少间距：
  \[
  \text{cursor}_x = \text{cursor}_x + x_{\text{advance}} + \text{spacing}
  \]
- `spacing` 可以基于 `.fnt` 文件中的 `spacing` 参数。

---

通过这些步骤和计算，你可以使用 `.fnt` 文件中的参数绘制整齐排列的字符，同时保持对字符间距、基线对齐和换行逻辑的灵活控制。