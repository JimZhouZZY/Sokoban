# 核心逻辑设计要点

核心逻辑设计上比较复杂，因为有多个方向的判断和连锁逻辑

这里给出一些设计要求和要点：

1. 箱子**可以**连续推动，也就是玩家可以一次推动多个箱子
2. 在操作结束后，方法需要返回（给前端）一个 `List` 对象，储存了发生了位移 `A -> B` 的对象，以便前端进行动画绘制

可以说第二点是比较难的，具体可以见 `Playercore.java` 中相关的例子

---

在设计 `Playercore` 类的时候，其实可以思考一下两种方案：

1. 保存一个 `MapData` 对象在其中，通过 `getter` 和 `setter` 访问，类内直接对这个 `MapData` 对象进行逻辑操作
2. 打造为一个纯粹的工具类，每个方法都接收一个 `MapData` 对象，然后进行处理

我的看法是，第一种设计方法可能更加**便捷**，理由如下

1. 将 `MapData` 放在成员变量，省去了每一次都要向方法中传递 `MapData` 的麻烦
2. 保证了数据封装性，如果自己不管理 `MapData` ，很有可能就需要前端接手地图数据管理，这和前端的职能（显示动画、用户交互）不太相符
3. `return` 不能同时返回位移对象列表 `List` 和发生改变后的地图数据，如果再写一个类去存这两个变量也十分臃肿

因此，`Playercore` 类更适合自己管理 `MapData` 对象，所以这里对之前的代码进行一下改革 